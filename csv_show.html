
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>CSV 路線地圖顯示</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map { height: 600px; }
        .checkboxes { 
            margin: 10px 0; 
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .checkboxes label {
            display: inline-block;
            margin-right: 15px;
            cursor: pointer;
        }
        .checkboxes input {
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <h2>多重 CSV 路線顯示</h2>
    <div class="checkboxes" id="checkboxContainer"></div>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        const routesData = {"chiyou_pintian.csv": [[24.397295771832898, 121.30733951690434, 1898.17666480504], [24.397242535285347, 121.30740138041524, 1895.99771215779], [24.39723785985579, 121.30691002696416, 1900.74081464042], [24.397268852670557, 121.30748260970084, 1896.326044665023], [24.39726528490749, 121.30727613330976, 1895.4456274233528], [24.39696781404116, 121.30754325809018, 1895.9857327567363], [24.397, 121.3077, 1400.0], [24.39709100975444, 121.30766312098028, 1895.719364390448], [24.39729739581181, 121.30708484390593, 1896.366410966585], [24.397091648504173, 121.30747759325874, 1897.3668262589], [24.397340726177077, 121.30727776376888, 1896.1462655761072], [24.39715528745526, 121.30735993806108, 1897.7537046107816], [24.39728984396267, 121.30712533131349, 1895.829027850057], [24.397111734462488, 121.30732547138776, 1896.3936141219192], [24.39719821873846, 121.30733058898934, 1896.293196355836], [24.397102460969634, 121.30716161500388, 1897.4575641179124], [24.39701637465029, 121.3072436134024, 1898.3406506012068], [24.39716671155616, 121.307239083336, 1900.24569039496], [24.396866249474908, 121.30735270288751, 1897.7028555437096], [24.39704175822705, 121.3079329295931, 1891.689074724581], [24.397378034509742, 121.3079384834654, 1888.2065904456765], [24.397715469726364, 121.30776819274506, 1890.9460355202707], [24.398037948490817, 121.30790246081104, 1896.1096706564197], [24.3989, 121.3083, 1450.0], [24.39890604911825, 121.3081806349895, 1906.86544274562], [24.39915506696056, 121.30833635019596, 1911.0398418469829], [24.39973863629532, 121.30774329658642, 1921.7896599638548], [24.40057718214382, 121.3073717248651, 1926.2302633905972], [24.4014079596186, 121.3069653572575, 1944.189679605117], [24.40195822325904, 121.30684637132804, 1943.991270141005], [24.40233443945635, 121.30699700326036, 1956.2880743732776], [24.40323518617604, 121.30715132901268, 1964.5321884301843], [24.40413823460049, 121.307293176143, 1972.1680193722868], [24.405041518748103, 121.30755043508618, 1982.7639409200865], [24.40512864450948, 121.30751767620936, 1987.942260751764], [24.40502978233482, 121.30765190039789, 1983.2981052442851], [24.40519741573564, 121.30763446796978, 1981.147310466318], [24.405251709117135, 121.3074716160462, 1983.817466718379], [24.404990528620385, 121.3072035169488, 1993.082242864405], [24.40427637379819, 121.30698880623513, 1991.350600425977], [24.404095375525674, 121.30701891537971, 1994.133621513659], [24.40345556667536, 121.30656673010076, 1997.2339752125192], [24.402880655854016, 121.30617334053456, 1998.0415088067768], [24.40292924065413, 121.30607967253113, 1996.861534269589], [24.403374045442725, 121.3062059637503, 2008.6906316843376], [24.40392512620781, 121.30569289103865, 2026.458315259932], [24.404341706119457, 121.3048057990762, 2039.219621932328], [24.404423449079605, 121.30454513695015, 2044.6244841014184], [24.40487358872913, 121.30400170721803, 2058.185761334895], [24.405450415661814, 121.3032231728924, 2062.568742390921], [24.4282, 121.2668, 3524.0], [24.431111, 121.28815, 3303.0], [24.426696, 121.29296, 3000.0], [24.416849, 121.29899, 2600.0], [24.408, 121.3045, 2200.0], [24.4057420564854, 121.30303017147884, 2068.018310469737], [24.40575731380032, 121.30269750906878, 2080.612319847958], [24.40592711674596, 121.30270419305964, 2077.5856763072325]], "chiyou_pintian_processed.csv": [[24.397295771832898, 121.30733951690434, 1898.17666480504], [24.397242535285347, 121.30740138041524, 1895.99771215779], [24.39723785985579, 121.30691002696416, 1900.74081464042], [24.397, 121.3077, 1400.0], [24.397268852670557, 121.30748260970084, 1896.326044665023], [24.39726528490749, 121.30727613330976, 1895.4456274233528], [24.39696781404116, 121.30754325809018, 1895.9857327567363], [24.39709100975444, 121.30766312098028, 1895.719364390448], [24.39729739581181, 121.30708484390593, 1896.366410966585], [24.397091648504173, 121.30747759325874, 1897.3668262589], [24.397340726177077, 121.30727776376888, 1896.1462655761072], [24.39715528745526, 121.30735993806108, 1897.7537046107816], [24.39728984396267, 121.30712533131349, 1895.829027850057], [24.397111734462488, 121.30732547138776, 1896.3936141219192], [24.39719821873846, 121.30733058898934, 1896.293196355836], [24.397102460969634, 121.30716161500388, 1897.4575641179124], [24.39701637465029, 121.3072436134024, 1898.3406506012068], [24.39716671155616, 121.307239083336, 1900.24569039496], [24.396866249474908, 121.30735270288751, 1897.7028555437096], [24.39704175822705, 121.3079329295931, 1891.689074724581], [24.397378034509742, 121.3079384834654, 1888.2065904456765], [24.3989, 121.3083, 1450.0], [24.397715469726364, 121.30776819274506, 1890.9460355202707], [24.398037948490817, 121.30790246081104, 1896.1096706564197], [24.39890604911825, 121.3081806349895, 1906.86544274562], [24.39915506696056, 121.30833635019596, 1911.0398418469829], [24.39973863629532, 121.30774329658642, 1921.7896599638548], [24.40057718214382, 121.3073717248651, 1926.2302633905972], [24.4014079596186, 121.3069653572575, 1944.189679605117], [24.40195822325904, 121.30684637132804, 1943.991270141005], [24.40233443945635, 121.30699700326036, 1956.2880743732776], [24.40323518617604, 121.30715132901268, 1964.5321884301843], [24.40413823460049, 121.307293176143, 1972.1680193722868], [24.405041518748103, 121.30755043508618, 1982.7639409200865], [24.40512864450948, 121.30751767620936, 1987.942260751764], [24.40502978233482, 121.30765190039789, 1983.2981052442851], [24.40519741573564, 121.30763446796978, 1981.147310466318], [24.405251709117135, 121.3074716160462, 1983.817466718379], [24.404990528620385, 121.3072035169488, 1993.082242864405], [24.40427637379819, 121.30698880623513, 1991.350600425977], [24.404095375525674, 121.30701891537971, 1994.133621513659], [24.40345556667536, 121.30656673010076, 1997.2339752125192], [24.402880655854016, 121.30617334053456, 1998.0415088067768], [24.40292924065413, 121.30607967253113, 1996.861534269589], [24.403374045442725, 121.3062059637503, 2008.6906316843376], [24.40392512620781, 121.30569289103865, 2026.458315259932], [24.404341706119457, 121.3048057990762, 2039.219621932328], [24.404423449079605, 121.30454513695015, 2044.6244841014184], [24.4282, 121.2668, 3524.0], [24.431111, 121.28815, 3303.0], [24.426696, 121.29296, 3000.0], [24.416849, 121.29899, 2600.0], [24.408, 121.3045, 2200.0], [24.40487358872913, 121.30400170721803, 2058.185761334895], [24.405450415661814, 121.3032231728924, 2062.568742390921], [24.4057420564854, 121.30303017147884, 2068.018310469737], [24.40575731380032, 121.30269750906878, 2080.612319847958], [24.40592711674596, 121.30270419305964, 2077.5856763072325]], "tao.csv": [[24.397, 121.3077, 1400.0], [24.396892, 121.307373, 1900.4], [24.396891, 121.307424, 1900.5], [24.397081, 121.307954, 1900.7], [24.39714, 121.30799, 1900.7], [24.397487, 121.307933, 1900.7], [24.397537, 121.307905, 1900.8], [24.397662, 121.307742, 1901.0], [24.397925, 121.307816, 1902.5], [24.398296, 121.307955, 1905.1], [24.398514, 121.308101, 1906.6], [24.398782, 121.308182, 1908.9], [24.399099, 121.308315, 1911.1], [24.399156, 121.308324, 1911.9], [24.399457, 121.308101, 1915.2], [24.399663, 121.307886, 1916.5], [24.399935, 121.307736, 1917.4], [24.400384, 121.307369, 1920.9], [24.400447, 121.307352, 1921.7], [24.400531, 121.307357, 1922.7], [24.400971, 121.307125, 1927.8], [24.401079, 121.307034, 1928.8], [24.401183, 121.306979, 1929.9], [24.40131, 121.306961, 1930.9], [24.401718, 121.306991, 1934.8], [24.401808, 121.306985, 1935.8], [24.401885, 121.306937, 1936.7], [24.401948, 121.306937, 1937.6], [24.402175, 121.30699, 1939.5], [24.402497, 121.307124, 1942.6], [24.402744, 121.307189, 1944.9], [24.403121, 121.3072, 1950.1], [24.403528, 121.307269, 1956.4], [24.403795, 121.307291, 1959.9], [24.403917, 121.307334, 1961.9], [24.404258, 121.307361, 1967.8], [24.404388, 121.307419, 1969.7], [24.404723, 121.30749, 1975.5], [24.404959, 121.307602, 1979.3], [24.405033, 121.307618, 1981.2], [24.405104, 121.307586, 1983.1], [24.405143, 121.307608, 1985.1], [24.40522, 121.30758, 2100.0], [24.405194, 121.307607, 1987.0], [24.405198, 121.307607, 1988.9], [24.405201, 121.307604, 1990.7], [24.405222, 121.307583, 1992.3], [24.405222, 121.307583, 2004.7], [24.405201, 121.307604, 2004.6], [24.405198, 121.307607, 2005.8], [24.405199, 121.307609, 2001.4], [24.405398, 121.308377, 1990.8], [24.405626, 121.308748, 1989.4], [24.405906, 121.308636, 1989.2], [24.406572, 121.309078, 1986.9], [24.406807, 121.309362, 1988.0], [24.406911, 121.309487, 1988.5], [24.407483, 121.309609, 1995.4], [24.407665, 121.309535, 1998.8], [24.408112, 121.31031, 2017.8], [24.408494, 121.310223, 2029.3], [24.409465, 121.310962, 2073.8], [24.409381, 121.311337, 2085.7], [24.409775, 121.311558, 2102.4], [24.409999, 121.311503, 2112.4], [24.410564, 121.311149, 2148.9], [24.410986, 121.311035, 2169.5], [24.411122, 121.310978, 2174.8], [24.411226, 121.311045, 2180.1], [24.411281, 121.31094, 2186.1], [24.411335, 121.310998, 2191.8], [24.411569, 121.310792, 2207.5], [24.411618, 121.310842, 2212.0], [24.411701, 121.310688, 2216.7], [24.411821, 121.310715, 2221.3], [24.411856, 121.310616, 2226.3], [24.412085, 121.310488, 2236.9], [24.412148, 121.3103, 2247.6], [24.412264, 121.310302, 2253.3], [24.412318, 121.310126, 2259.7], [24.412404, 121.310188, 2266.2], [24.412424, 121.310065, 2272.9], [24.412697, 121.30991, 2294.2], [24.412715, 121.309769, 2300.7], [24.412829, 121.309677, 2307.6], [24.412912, 121.309689, 2314.5], [24.413065, 121.309535, 2327.7], [24.413127, 121.309393, 2334.2], [24.413214, 121.30935, 2340.0], [24.413322, 121.309159, 2350.9], [24.413425, 121.309184, 2355.9], [24.41348, 121.309009, 2360.7], [24.413547, 121.309104, 2365.2], [24.413557, 121.309025, 2369.7], [24.413605, 121.309035, 2373.5], [24.413612, 121.308922, 2376.7], [24.41368, 121.308922, 2379.7], [24.413852, 121.308814, 2384.9], [24.413831, 121.30874, 2387.1], [24.4163, 121.3072, 2700.0], [24.414733, 121.308368, 2410.2], [24.414767, 121.308218, 2413.1], [24.414932, 121.308213, 2416.4], [24.416042, 121.307222, 2499.2], [24.416289, 121.307206, 2513.1], [24.416829, 121.307024, 2550.1], [24.417609, 121.306878, 2587.4], [24.418351, 121.307128, 2614.3], [24.419, 121.306623, 2640.5], [24.419586, 121.306483, 2657.8], [24.419988, 121.305614, 2682.5], [24.420311, 121.305347, 2693.8], [24.420568, 121.305322, 2700.6], [24.42114, 121.305399, 2721.3], [24.421578, 121.305333, 2734.0], [24.421806, 121.305195, 2742.0], [24.422319, 121.305305, 2764.5], [24.422389, 121.30469, 2789.3], [24.422851, 121.304831, 2810.8], [24.423189, 121.304958, 2823.7], [24.423525, 121.304887, 2832.5], [24.423651, 121.304826, 2835.5], [24.424153, 121.304829, 2850.0], [24.424252, 121.304563, 2856.4], [24.424471, 121.304434, 2863.5], [24.424862, 121.304356, 2878.5], [24.42501, 121.304397, 2882.8], [24.4251, 121.304456, 2886.9], [24.425429, 121.304309, 2900.3], [24.425613, 121.304139, 2910.6], [24.425813, 121.303869, 2926.7], [24.426104, 121.303658, 2942.6], [24.426397, 121.303748, 2959.7], [24.426605, 121.303686, 2971.6], [24.426708, 121.303505, 2984.0], [24.426727, 121.303313, 2989.9], [24.427053, 121.303316, 3008.8], [24.427498, 121.303578, 3036.8], [24.427517, 121.303695, 3041.5], [24.427729, 121.30369, 3050.3], [24.427772, 121.303814, 3055.0], [24.428027, 121.303691, 3067.0], [24.428065, 121.303596, 3070.8], [24.428197, 121.303784, 3077.5], [24.428315, 121.304023, 3083.1], [24.428753, 121.304088, 3091.3], [24.428879, 121.303986, 3093.6], [24.428866, 121.304103, 3095.8], [24.428996, 121.304118, 3098.4], [24.429164, 121.303995, 3104.2], [24.429175, 121.304148, 3107.2], [24.429297, 121.304086, 3110.4], [24.430197, 121.304253, 3136.3], [24.430515, 121.304578, 3152.4], [24.43251, 121.30463, 3323.0]], "tao_kalaye.csv": [[24.397, 121.3077, 1400.0], [24.396892, 121.307373, 1900.4], [24.396891, 121.307424, 1900.5], [24.397081, 121.307954, 1900.7], [24.39714, 121.30799, 1900.7], [24.397487, 121.307933, 1900.7], [24.397537, 121.307905, 1900.8], [24.397662, 121.307742, 1901.0], [24.3989, 121.3083, 1450.0], [24.397925, 121.307816, 1902.5], [24.398296, 121.307955, 1905.1], [24.398514, 121.308101, 1906.6], [24.398782, 121.308182, 1908.9], [24.399099, 121.308315, 1911.1], [24.399156, 121.308324, 1911.9], [24.399457, 121.308101, 1915.2], [24.399663, 121.307886, 1916.5], [24.399935, 121.307736, 1917.4], [24.400384, 121.307369, 1920.9], [24.400447, 121.307352, 1921.7], [24.400531, 121.307357, 1922.7], [24.400971, 121.307125, 1927.8], [24.401079, 121.307034, 1928.8], [24.401183, 121.306979, 1929.9], [24.40131, 121.306961, 1930.9], [24.401718, 121.306991, 1934.8], [24.401808, 121.306985, 1935.8], [24.401885, 121.306937, 1936.7], [24.401948, 121.306937, 1937.6], [24.402175, 121.30699, 1939.5], [24.402497, 121.307124, 1942.6], [24.402744, 121.307189, 1944.9], [24.403121, 121.3072, 1950.1], [24.403528, 121.307269, 1956.4], [24.403795, 121.307291, 1959.9], [24.403917, 121.307334, 1961.9], [24.404258, 121.307361, 1967.8], [24.404388, 121.307419, 1969.7], [24.404723, 121.30749, 1975.5], [24.404959, 121.307602, 1979.3], [24.405033, 121.307618, 1981.2], [24.405104, 121.307586, 1983.1], [24.40522, 121.30758, 2100.0], [24.405143, 121.307608, 1985.1], [24.405194, 121.307607, 1987.0], [24.405198, 121.307607, 1988.9], [24.405201, 121.307604, 1990.7], [24.405222, 121.307583, 1992.3], [24.405222, 121.307583, 2004.7], [24.405201, 121.307604, 2004.6], [24.405198, 121.307607, 2005.8], [24.405199, 121.307609, 2001.4], [24.405398, 121.308377, 1990.8], [24.405626, 121.308748, 1989.4], [24.405906, 121.308636, 1989.2], [24.406572, 121.309078, 1986.9], [24.406807, 121.309362, 1988.0], [24.406911, 121.309487, 1988.5], [24.407483, 121.309609, 1995.4], [24.407665, 121.309535, 1998.8], [24.41011, 121.31125, 2300.0], [24.408112, 121.31031, 2017.8], [24.408494, 121.310223, 2029.3], [24.409465, 121.310962, 2073.8], [24.409381, 121.311337, 2085.7], [24.409775, 121.311558, 2102.4], [24.409999, 121.311503, 2112.4], [24.410564, 121.311149, 2148.9], [24.410986, 121.311035, 2169.5], [24.411122, 121.310978, 2174.8], [24.411226, 121.311045, 2180.1], [24.411281, 121.31094, 2186.1], [24.411335, 121.310998, 2191.8], [24.411569, 121.310792, 2207.5], [24.411618, 121.310842, 2212.0], [24.411701, 121.310688, 2216.7], [24.411821, 121.310715, 2221.3], [24.411856, 121.310616, 2226.3], [24.412085, 121.310488, 2236.9], [24.412148, 121.3103, 2247.6], [24.412264, 121.310302, 2253.3], [24.412318, 121.310126, 2259.7], [24.412404, 121.310188, 2266.2], [24.412424, 121.310065, 2272.9], [24.412697, 121.30991, 2294.2], [24.412715, 121.309769, 2300.7], [24.412829, 121.309677, 2307.6], [24.412912, 121.309689, 2314.5], [24.413065, 121.309535, 2327.7], [24.413127, 121.309393, 2334.2], [24.413214, 121.30935, 2340.0], [24.413322, 121.309159, 2350.9], [24.413425, 121.309184, 2355.9], [24.41348, 121.309009, 2360.7], [24.413547, 121.309104, 2365.2], [24.413557, 121.309025, 2369.7], [24.413605, 121.309035, 2373.5], [24.413612, 121.308922, 2376.7], [24.41368, 121.308922, 2379.7], [24.4163, 121.3072, 2700.0], [24.413852, 121.308814, 2384.9], [24.413831, 121.30874, 2387.1], [24.414733, 121.308368, 2410.2], [24.414767, 121.308218, 2413.1], [24.414932, 121.308213, 2416.4], [24.416042, 121.307222, 2499.2], [24.416289, 121.307206, 2513.1], [24.416829, 121.307024, 2553.3], [24.417609, 121.306878, 2596.3], [24.4178, 121.306966, 2604.8], [24.418351, 121.307128, 2624.9], [24.419, 121.306623, 2641.5], [24.419586, 121.306483, 2653.3], [24.419988, 121.305614, 2683.6], [24.420311, 121.305347, 2700.3], [24.420427, 121.305347, 2704.4], [24.420519, 121.305291, 2708.7], [24.420554, 121.305289, 2712.8], [24.420661, 121.305317, 2717.1], [24.420707, 121.305386, 2721.5], [24.420793, 121.305368, 2725.4], [24.420872, 121.305311, 2729.0], [24.420938, 121.305342, 2732.2], [24.420962, 121.305371, 2736.2], [24.420996, 121.305384, 2740.0], [24.42114, 121.305399, 2743.5], [24.421166, 121.305395, 2746.7], [24.421578, 121.305333, 2756.9], [24.421806, 121.305195, 2763.0], [24.422319, 121.305305, 2781.0], [24.422389, 121.30469, 2801.1], [24.422851, 121.304831, 2817.8], [24.423189, 121.304958, 2828.6], [24.423525, 121.304887, 2836.0], [24.423651, 121.304826, 2838.6], [24.424153, 121.304829, 2852.0], [24.424252, 121.304563, 2858.0], [24.424471, 121.304434, 2864.9], [24.4264, 121.30377, 3000.0], [24.424862, 121.304356, 2879.4], [24.42501, 121.304397, 2883.6], [24.4251, 121.304456, 2887.6], [24.425429, 121.304309, 2900.8], [24.425613, 121.304139, 2911.0], [24.425813, 121.303869, 2927.1], [24.426104, 121.303658, 2942.8], [24.426397, 121.303748, 2959.9], [24.426605, 121.303686, 2971.8], [24.426708, 121.303505, 2984.1], [24.426727, 121.303313, 2990.0], [24.427053, 121.303316, 3008.9], [24.427498, 121.303578, 3036.8], [24.427517, 121.303695, 3041.5], [24.427729, 121.30369, 3050.3], [24.427772, 121.303814, 3055.0], [24.428027, 121.303691, 3067.0], [24.428065, 121.303596, 3070.8], [24.428197, 121.303784, 3077.5], [24.428315, 121.304023, 3083.1], [24.428753, 121.304088, 3091.3], [24.428879, 121.303986, 3093.6], [24.428866, 121.304103, 3095.8], [24.428996, 121.304118, 3098.5], [24.429164, 121.303995, 3104.2], [24.429175, 121.304148, 3107.2], [24.43251, 121.30463, 3323.0], [24.429297, 121.304086, 3110.4], [24.45003, 121.32139, 3133.0]], "tao_kalaye_processed.csv": [[24.397526, 121.30702, 1899.0], [24.397336, 121.306922, 1899.0], [24.397307, 121.306911, 1899.0], [24.397209, 121.306915, 1899.0], [24.397185, 121.30701, 1899.5], [24.397, 121.3077, 1400.0], [24.396892, 121.307373, 1900.4], [24.396891, 121.307424, 1900.5], [24.397081, 121.307954, 1900.7], [24.39714, 121.30799, 1900.7], [24.397487, 121.307933, 1900.7], [24.397537, 121.307905, 1900.8], [24.397662, 121.307742, 1901.0], [24.397925, 121.307816, 1902.5], [24.398296, 121.307955, 1905.1], [24.3989, 121.3083, 1450.0], [24.398514, 121.308101, 1906.6], [24.398782, 121.308182, 1908.9], [24.399099, 121.308315, 1911.1], [24.399156, 121.308324, 1911.9], [24.399457, 121.308101, 1915.2], [24.399663, 121.307886, 1916.5], [24.399935, 121.307736, 1917.4], [24.400384, 121.307369, 1920.9], [24.400447, 121.307352, 1921.7], [24.400531, 121.307357, 1922.7], [24.400971, 121.307125, 1927.8], [24.401079, 121.307034, 1928.8], [24.401183, 121.306979, 1929.9], [24.40131, 121.306961, 1930.9], [24.401718, 121.306991, 1934.8], [24.401808, 121.306985, 1935.8], [24.401885, 121.306937, 1936.7], [24.401948, 121.306937, 1937.6], [24.402175, 121.30699, 1939.5], [24.402497, 121.307124, 1942.6], [24.402744, 121.307189, 1944.9], [24.403121, 121.3072, 1950.1], [24.403528, 121.307269, 1956.4], [24.403795, 121.307291, 1959.9], [24.403917, 121.307334, 1961.9], [24.404258, 121.307361, 1967.8], [24.404388, 121.307419, 1969.7], [24.404723, 121.30749, 1975.5], [24.404959, 121.307602, 1979.3], [24.405033, 121.307618, 1981.2], [24.405104, 121.307586, 1983.1], [24.405143, 121.307608, 1985.1], [24.405194, 121.307607, 1987.0], [24.40522, 121.30758, 2100.0], [24.405198, 121.307607, 1988.9], [24.405201, 121.307604, 1990.7], [24.405222, 121.307583, 1992.3], [24.405222, 121.307583, 2004.7], [24.405201, 121.307604, 2004.6], [24.405198, 121.307607, 2005.8], [24.405199, 121.307609, 2001.4], [24.405398, 121.308377, 1990.8], [24.405626, 121.308748, 1989.4], [24.405906, 121.308636, 1989.2], [24.406572, 121.309078, 1986.9], [24.406807, 121.309362, 1988.0], [24.406911, 121.309487, 1988.5], [24.407483, 121.309609, 1995.4], [24.407665, 121.309535, 1998.8], [24.408112, 121.31031, 2017.8], [24.408494, 121.310223, 2029.3], [24.41011, 121.31125, 2300.0], [24.409465, 121.310962, 2073.8], [24.409381, 121.311337, 2085.7], [24.409775, 121.311558, 2102.4], [24.409999, 121.311503, 2112.4], [24.410564, 121.311149, 2148.9], [24.410986, 121.311035, 2169.5], [24.411122, 121.310978, 2174.8], [24.411226, 121.311045, 2180.1], [24.411281, 121.31094, 2186.1], [24.411335, 121.310998, 2191.8], [24.411569, 121.310792, 2207.5], [24.411618, 121.310842, 2212.0], [24.411701, 121.310688, 2216.7], [24.411821, 121.310715, 2221.3], [24.411856, 121.310616, 2226.3], [24.412085, 121.310488, 2236.9], [24.412148, 121.3103, 2247.6], [24.412264, 121.310302, 2253.3], [24.412318, 121.310126, 2259.7], [24.412404, 121.310188, 2266.2], [24.412424, 121.310065, 2272.9], [24.412697, 121.30991, 2294.2], [24.412715, 121.309769, 2300.7], [24.412829, 121.309677, 2307.6], [24.412912, 121.309689, 2314.5], [24.413065, 121.309535, 2327.7], [24.413127, 121.309393, 2334.2], [24.413214, 121.30935, 2340.0], [24.413322, 121.309159, 2350.9], [24.413425, 121.309184, 2355.9], [24.41348, 121.309009, 2360.7], [24.413547, 121.309104, 2365.2], [24.413557, 121.309025, 2369.7], [24.413605, 121.309035, 2373.5], [24.413612, 121.308922, 2376.7], [24.41368, 121.308922, 2379.7], [24.413852, 121.308814, 2384.9], [24.413831, 121.30874, 2387.1], [24.414733, 121.308368, 2410.2], [24.414767, 121.308218, 2413.1], [24.414932, 121.308213, 2416.4], [24.4163, 121.3072, 2700.0], [24.416042, 121.307222, 2499.2], [24.416289, 121.307206, 2513.1], [24.416829, 121.307024, 2553.3], [24.417609, 121.306878, 2596.3], [24.4178, 121.306966, 2604.8], [24.418351, 121.307128, 2624.9], [24.419, 121.306623, 2641.5], [24.419586, 121.306483, 2653.3], [24.419988, 121.305614, 2683.6], [24.420311, 121.305347, 2700.3], [24.420427, 121.305347, 2704.4], [24.420519, 121.305291, 2708.7], [24.420554, 121.305289, 2712.8], [24.420661, 121.305317, 2717.1], [24.420707, 121.305386, 2721.5], [24.420793, 121.305368, 2725.4], [24.420872, 121.305311, 2729.0], [24.420938, 121.305342, 2732.2], [24.420962, 121.305371, 2736.2], [24.420996, 121.305384, 2740.0], [24.42114, 121.305399, 2743.5], [24.421166, 121.305395, 2746.7], [24.421578, 121.305333, 2756.9], [24.421806, 121.305195, 2763.0], [24.422319, 121.305305, 2781.0], [24.422389, 121.30469, 2801.1], [24.422851, 121.304831, 2817.8], [24.423189, 121.304958, 2828.6], [24.423525, 121.304887, 2836.0], [24.423651, 121.304826, 2838.6], [24.424153, 121.304829, 2852.0], [24.424252, 121.304563, 2858.0], [24.424471, 121.304434, 2864.9], [24.424862, 121.304356, 2879.4], [24.42501, 121.304397, 2883.6], [24.4251, 121.304456, 2887.6], [24.425429, 121.304309, 2900.8], [24.425613, 121.304139, 2911.0], [24.425813, 121.303869, 2927.1], [24.4264, 121.30377, 3000.0], [24.426104, 121.303658, 2942.8], [24.426397, 121.303748, 2959.9], [24.426605, 121.303686, 2971.8], [24.426708, 121.303505, 2984.1], [24.426727, 121.303313, 2990.0], [24.427053, 121.303316, 3008.9], [24.427498, 121.303578, 3036.8], [24.427517, 121.303695, 3041.5], [24.427729, 121.30369, 3050.3], [24.427772, 121.303814, 3055.0], [24.428027, 121.303691, 3067.0], [24.428065, 121.303596, 3070.8], [24.428197, 121.303784, 3077.5], [24.428315, 121.304023, 3083.1], [24.428753, 121.304088, 3091.3], [24.428879, 121.303986, 3093.6], [24.428866, 121.304103, 3095.8], [24.428996, 121.304118, 3098.5], [24.429164, 121.303995, 3104.2], [24.429175, 121.304148, 3107.2], [24.429297, 121.304086, 3110.4], [24.430197, 121.304253, 3136.3], [24.430515, 121.304578, 3152.4], [24.43062, 121.304859, 3165.2], [24.430769, 121.30492, 3169.6], [24.4314, 121.304895, 3202.0], [24.45003, 121.32139, 3133.0], [24.43251, 121.30463, 3323.0], [24.431687, 121.304841, 3215.4], [24.432065, 121.304811, 3231.3], [24.432463, 121.304842, 3241.0], [24.432506, 121.304902, 3242.9], [24.43264, 121.304903, 3244.8]], "tao_processed.csv": [[24.397523, 121.307019, 1899.0], [24.397334, 121.306925, 1899.0], [24.397307, 121.306911, 1899.0], [24.397209, 121.306915, 1899.0], [24.397185, 121.30701, 1899.5], [24.397, 121.3077, 1400.0], [24.396892, 121.307373, 1900.4], [24.396891, 121.307424, 1900.5], [24.397081, 121.307954, 1900.7], [24.39714, 121.30799, 1900.7], [24.397487, 121.307933, 1900.7], [24.397537, 121.307905, 1900.8], [24.397662, 121.307742, 1901.0], [24.397925, 121.307816, 1902.5], [24.398296, 121.307955, 1905.1], [24.398514, 121.308101, 1906.6], [24.398782, 121.308182, 1908.9], [24.399099, 121.308315, 1911.1], [24.399156, 121.308324, 1911.9], [24.399457, 121.308101, 1915.2], [24.399663, 121.307886, 1916.5], [24.399935, 121.307736, 1917.4], [24.400384, 121.307369, 1920.9], [24.400447, 121.307352, 1921.7], [24.400531, 121.307357, 1922.7], [24.400971, 121.307125, 1927.8], [24.401079, 121.307034, 1928.8], [24.401183, 121.306979, 1929.9], [24.40131, 121.306961, 1930.9], [24.401718, 121.306991, 1934.8], [24.401808, 121.306985, 1935.8], [24.401885, 121.306937, 1936.7], [24.401948, 121.306937, 1937.6], [24.402175, 121.30699, 1939.5], [24.402497, 121.307124, 1942.6], [24.402744, 121.307189, 1944.9], [24.403121, 121.3072, 1950.1], [24.403528, 121.307269, 1956.4], [24.403795, 121.307291, 1959.9], [24.403917, 121.307334, 1961.9], [24.404258, 121.307361, 1967.8], [24.404388, 121.307419, 1969.7], [24.404723, 121.30749, 1975.5], [24.404959, 121.307602, 1979.3], [24.405033, 121.307618, 1981.2], [24.405104, 121.307586, 1983.1], [24.405143, 121.307608, 1985.1], [24.405194, 121.307607, 1987.0], [24.40522, 121.30758, 2100.0], [24.405198, 121.307607, 1988.9], [24.405201, 121.307604, 1990.7], [24.405222, 121.307583, 1992.3], [24.405222, 121.307583, 2004.7], [24.405201, 121.307604, 2004.6], [24.405198, 121.307607, 2005.8], [24.405199, 121.307609, 2001.4], [24.405398, 121.308377, 1990.8], [24.405626, 121.308748, 1989.4], [24.405906, 121.308636, 1989.2], [24.406572, 121.309078, 1986.9], [24.406807, 121.309362, 1988.0], [24.406911, 121.309487, 1988.5], [24.407483, 121.309609, 1995.4], [24.407665, 121.309535, 1998.8], [24.408112, 121.31031, 2017.8], [24.408494, 121.310223, 2029.3], [24.409465, 121.310962, 2073.8], [24.409381, 121.311337, 2085.7], [24.409775, 121.311558, 2102.4], [24.409999, 121.311503, 2112.4], [24.410564, 121.311149, 2148.9], [24.410986, 121.311035, 2169.5], [24.411122, 121.310978, 2174.8], [24.411226, 121.311045, 2180.1], [24.411281, 121.31094, 2186.1], [24.411335, 121.310998, 2191.8], [24.411569, 121.310792, 2207.5], [24.411618, 121.310842, 2212.0], [24.411701, 121.310688, 2216.7], [24.411821, 121.310715, 2221.3], [24.411856, 121.310616, 2226.3], [24.412085, 121.310488, 2236.9], [24.412148, 121.3103, 2247.6], [24.412264, 121.310302, 2253.3], [24.412318, 121.310126, 2259.7], [24.412404, 121.310188, 2266.2], [24.412424, 121.310065, 2272.9], [24.412697, 121.30991, 2294.2], [24.412715, 121.309769, 2300.7], [24.412829, 121.309677, 2307.6], [24.412912, 121.309689, 2314.5], [24.413065, 121.309535, 2327.7], [24.413127, 121.309393, 2334.2], [24.413214, 121.30935, 2340.0], [24.413322, 121.309159, 2350.9], [24.413425, 121.309184, 2355.9], [24.41348, 121.309009, 2360.7], [24.413547, 121.309104, 2365.2], [24.413557, 121.309025, 2369.7], [24.413605, 121.309035, 2373.5], [24.413612, 121.308922, 2376.7], [24.41368, 121.308922, 2379.7], [24.413852, 121.308814, 2384.9], [24.413831, 121.30874, 2387.1], [24.414733, 121.308368, 2410.2], [24.414767, 121.308218, 2413.1], [24.4163, 121.3072, 2700.0], [24.414932, 121.308213, 2416.4], [24.416042, 121.307222, 2499.2], [24.416289, 121.307206, 2513.1], [24.416829, 121.307024, 2550.1], [24.417609, 121.306878, 2587.4], [24.418351, 121.307128, 2614.3], [24.419, 121.306623, 2640.5], [24.419586, 121.306483, 2657.8], [24.419988, 121.305614, 2682.5], [24.420311, 121.305347, 2693.8], [24.420568, 121.305322, 2700.6], [24.42114, 121.305399, 2721.3], [24.421578, 121.305333, 2734.0], [24.421806, 121.305195, 2742.0], [24.422319, 121.305305, 2764.5], [24.422389, 121.30469, 2789.3], [24.422851, 121.304831, 2810.8], [24.423189, 121.304958, 2823.7], [24.423525, 121.304887, 2832.5], [24.423651, 121.304826, 2835.5], [24.424153, 121.304829, 2850.0], [24.424252, 121.304563, 2856.4], [24.424471, 121.304434, 2863.5], [24.424862, 121.304356, 2878.5], [24.42501, 121.304397, 2882.8], [24.4251, 121.304456, 2886.9], [24.425429, 121.304309, 2900.3], [24.425613, 121.304139, 2910.6], [24.425813, 121.303869, 2926.7], [24.426104, 121.303658, 2942.6], [24.426397, 121.303748, 2959.7], [24.426605, 121.303686, 2971.6], [24.426708, 121.303505, 2984.0], [24.426727, 121.303313, 2989.9], [24.427053, 121.303316, 3008.8], [24.427498, 121.303578, 3036.8], [24.427517, 121.303695, 3041.5], [24.427729, 121.30369, 3050.3], [24.427772, 121.303814, 3055.0], [24.428027, 121.303691, 3067.0], [24.428065, 121.303596, 3070.8], [24.428197, 121.303784, 3077.5], [24.428315, 121.304023, 3083.1], [24.428753, 121.304088, 3091.3], [24.428879, 121.303986, 3093.6], [24.428866, 121.304103, 3095.8], [24.428996, 121.304118, 3098.4], [24.429164, 121.303995, 3104.2], [24.429175, 121.304148, 3107.2], [24.429297, 121.304086, 3110.4], [24.430197, 121.304253, 3136.3], [24.430515, 121.304578, 3152.4], [24.43062, 121.304859, 3165.2], [24.43251, 121.30463, 3323.0], [24.430769, 121.30492, 3169.6], [24.4314, 121.304895, 3202.0], [24.431687, 121.304841, 3215.4], [24.432065, 121.304811, 3231.3], [24.432463, 121.304842, 3241.0]], "tao_waterfall.csv": [[24.397, 121.3077, 1400.0], [24.39884477991679, 121.30812638344148, 1899.1294815158471], [24.39924236898166, 121.30829328575244, 1911.8828662663643], [24.399721335508524, 121.3078675532988, 1921.921469681013], [24.40008022006423, 121.3075303730516, 1924.8718032006796], [24.40050710227305, 121.30737520441892, 1929.481927366077], [24.40131174308535, 121.30691619570838, 1938.965833455622], [24.40221944424623, 121.3069532578324, 1952.9081076772009], [24.40522, 121.30758, 2100.0]], "tao_waterfall_processed.csv": [[24.3989, 121.3083, 1450.0], [24.397, 121.3077, 1400.0], [24.39884477991679, 121.30812638344148, 1899.1294815158471], [24.39924236898166, 121.30829328575244, 1911.8828662663643], [24.399721335508524, 121.3078675532988, 1921.921469681013], [24.40008022006423, 121.3075303730516, 1924.8718032006796], [24.40050710227305, 121.30737520441892, 1929.481927366077], [24.403, 121.306, 1750.0], [24.40131174308535, 121.30691619570838, 1938.965833455622], [24.40221944424623, 121.3069532578324, 1952.9081076772009], [24.40522, 121.30758, 2100.0], [24.408, 121.3045, 2200.0], [24.414028, 121.302781, 2338.0], [24.403105727900822, 121.30716316643682, 1955.8474992397755], [24.403231485507582, 121.30728407402918, 1951.6645027262252], [24.40400373112469, 121.30728324502265, 1970.480878193828], [24.40489471314978, 121.3074661060129, 1982.5931529688232], [24.40528830533728, 121.30759782495936, 1987.8729221860367]]};
        const map = L.map('map'); // 先不設定 view，讓 fitBounds 自動調整
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: 'Map data © OpenStreetMap contributors'
        }).addTo(map);

        const checkboxContainer = document.getElementById('checkboxContainer');
        const routeLayers = {};
        const allLatlngs = [];

        // 隨機顏色產生器
        const getRandomColor = () => {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        };

        // 建立 Checkbox 與圖層
        for (const [filename, coords] of Object.entries(routesData)) {
            const routeColor = getRandomColor();

            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.id = filename;
            checkbox.checked = true;

            const label = document.createElement('label');
            label.htmlFor = filename;
            // 讓標籤也帶有路線顏色
            label.innerHTML = `<span style="color: ${routeColor}; font-weight: bold;">&#9632;</span> ${filename}`;

            checkbox.addEventListener('change', () => {
                if (checkbox.checked) {
                    map.addLayer(routeLayers[filename]);
                } else {
                    map.removeLayer(routeLayers[filename]);
                }
            });

            checkboxContainer.appendChild(checkbox);
            checkboxContainer.appendChild(label);

            // *** 修正核心 ***
            // 1. 建立一個 Layer Group 來存放線條和所有標記點
            const routeGroup = L.layerGroup();

            // 2. 建立線條 (Polyline) 並加入 Group
            const latlngs = coords.map(c => {
                const latlng = [c[0], c[1]];
                allLatlngs.push(latlng); // 收集所有點以便後續自動縮放
                return latlng;
            });
            const polyline = L.polyline(latlngs, { color: routeColor, weight: 3 })
                             .bindPopup(`路線: ${filename}`);
            polyline.addTo(routeGroup);

            // 3. 建立標記點 (CircleMarker) 並加入 Group
            coords.forEach(c => {
                L.circleMarker([c[0], c[1]], {
                    radius: 3,
                    color: routeColor,
                    fillColor: '#FFF',
                    fillOpacity: 0.8
                }).bindPopup(`緯度: ${c[0]}<br>經度: ${c[1]}<br>海拔: ${c[2]} m`)
                  .addTo(routeGroup);
            });

            // 將整個 Group 存起來並加到地圖上
            routeLayers[filename] = routeGroup;
            routeGroup.addTo(map);
        }

        // 自動調整視野
        if (allLatlngs.length > 0) {
            map.fitBounds(allLatlngs);
        } else {
            map.setView([23.5, 121], 8); // 如果沒有資料，顯示台灣全島
        }
    </script>
</body>
</html>
